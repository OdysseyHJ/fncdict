涨幅,3672520,,IF^p^pMARKETTYPE ^e^e 128 OR MARKETTYPE ^e^e 80 OR MARKETTYPE ^e^e 64 OR ^pMARKETTYPE^e^e216 AND ISNULL^pTSETTLE^b1^B^P !^e TRUE^P OR MARKETTYPE^e^e112^P AND ISNULL^pSETTLE^P!^eTRUE^P^r^n{^r^nRETURN ^pCLOSE^sSETTLE^P/SETTLE*100^a^r^n}^r^nELSE IF^pISNULL^pCLOSE^b1^B^P^P^r^n        RETURN ^pCLOSE^sPRE^P/PRE*100^a^r^nELSE IF^p^pMARKETTYPE ^e^e 16 OR MARKETTYPE ^e^e 32^P AND CODETYPE ^e^e 1^P //为防止复权后小数点大于2位的问题造成计算结果和用界面上看到的2位小数算出来的结果不一致的问题^r^n{^r^n        AClOSE:^eINTPART^pCLOSE * 100^P/100^a^r^n    ATEMP:^eINTPART^pCLOSE * 1000^P ^s ACLOSE * 1000^a^r^n    IF ^pATEMP >^e 5^P^r^n        ACLOSE ^e ACLOSE + 0.01^a^r^n    ACLOSE1:^e INTPART^pCLOSE^b1^B * 100^P/100^a^r^n    ATEMP1:^eINTPART^pCLOSE^b1^B * 1000^P ^s ACLOSE1* 1000^a^r^n    IF ^pATEMP1 >^e 5^P^r^n        ACLOSE1^e ACLOSE1+ 0.01^a^r^n    RETURN ^pAClOSE^sACLOSE1^P/ACLOSE1*100^a^r^n}^r^nELSE^r^nRETURN ^pCLOSE^sCLOSE^b1^B^P/CLOSE^b1^B*100^a ,2147430400;