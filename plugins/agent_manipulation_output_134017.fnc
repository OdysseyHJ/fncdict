agent_manipulation_output,134017,,b1^eIF^pISNULL^pBIGBUYCOUNT1^b^s1^B^P^c0^cBIGBUYCOUNT1^b^s1^B^P+IF^pISNULL^pWAITBUYCOUNT1^b^s1^B^P^c0^cWAITBUYCOUNT1^b^s1^B^P^a^ns1^eIF^pISNULL^pBIGSELLCOUNT1^b^s1^B^P^c0^cBIGSELLCOUNT1^b^s1^B^P+IF^pISNULL^pWAITSELLCOUNT1^b^s1^B^P^c0^cWAITSELLCOUNT1^b^s1^B^P^a^nb2^eIF^pISNULL^pBIGBUYCOUNT2^b^s1^B^P^c0^cBIGBUYCOUNT2^b^s1^B^P+IF^pISNULL^pWAITBUYCOUNT2^b^s1^B^P^c0^cWAITBUYCOUNT2^b^s1^B^P^a^ns2^eIF^pISNULL^pBIGSELLCOUNT2^b^s1^B^P^c0^cBIGSELLCOUNT2^b^s1^B^P+IF^pISNULL^pWAITSELLCOUNT2^b^s1^B^P^c0^cWAITSELLCOUNT2^b^s1^B^P^a^n^nbm1^eIF^pISNULL^pBIGBUYMONEY1^b^s1^B^P^c0^cBIGBUYMONEY1^b^s1^B^P+IF^pISNULL^pWAITBUYMONEY1^b^s1^B^P^c0^cWAITBUYMONEY1^b^s1^B^P^a^nsm1^eIF^pISNULL^pBIGSELLMONEY1^b^s1^B^P^c0^cBIGSELLMONEY1^b^s1^B^P+IF^pISNULL^pWAITSELLMONEY1^b^s1^B^P^c0^cWAITSELLMONEY1^b^s1^B^P^a^nbm2^eIF^pISNULL^pBIGBUYMONEY2^b^s1^B^P^c0^cBIGBUYMONEY2^b^s1^B^P+IF^pISNULL^pWAITBUYMONEY2^b^s1^B^P^c0^cWAITBUYMONEY2^b^s1^B^P^a^nsm2^eIF^pISNULL^pBIGSELLMONEY2^b^s1^B^P^c0^cBIGSELLMONEY2^b^s1^B^P+IF^pISNULL^pWAITSELLMONEY2^b^s1^B^P^c0^cWAITSELLMONEY2^b^s1^B^P^a^nbm3^eIF^pISNULL^pBIGBUYMONEY3^b^s1^B^P^c0^cBIGBUYMONEY3^b^s1^B^P+IF^pISNULL^pWAITBUYMONEY3^b^s1^B^P^c0^cWAITBUYMONEY3^b^s1^B^P^a^nsm3^eIF^pISNULL^pBIGSELLMONEY3^b^s1^B^P^c0^cBIGSELLMONEY3^b^s1^B^P+IF^pISNULL^pWAITSELLMONEY3^b^s1^B^P^c0^cWAITSELLMONEY3^b^s1^B^P^a^n^nLv_super:^eMA^p^pbm1+bm2+bm3*0.5^P/MONEY^c10^P^a^nLv_cj:^eMA^p^pbm1+bm3*0.5^P/MONEY^c10^P^a^nLv_zh:^eMA^pbm3*0.5/MONEY^c10^P^a^n	^npos:^e^s2^a^n^n//^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^n^n^n^nIF^pISNULL^pLv_super^bpos^B^P^P//控盘度、超户曲线^n{^n	m^eJGCGS/^pTV_D_PUBLIC_SHARES*Lv_super^P^a^n	IF^pISNULL^pm^P OR m^e^e0^P m^e0.4663866413^a^n	IF^pm>0.9^P m^e0.9^a^n	ddx:^e^p^pb1^ss1^P+^pb2^ss2^P*0.7^P/TV_D_PUBLIC_SHARES *100^a//控盘度变化^n	ddx1:^e^p^pb1^ss1^P+^pb2^ss2^P*0.7*m^P/TV_D_PUBLIC_SHARES *100^a//超户变化^n	a8:^em^a^n	IF^pISNULL^pLv_super^P^P//判断新股^n	{^n		RET^e^pB1+b2^P/TV_D_PUBLIC_SHARES *100^a^n		RET1^eB1/TV_D_PUBLIC_SHARES *100^a^n	}^n	ELSE^n	{^n		X1^eLv_super*100^a//昨天控盘度^n		ret:^eX1+ddx^a//今天控盘度^n		X11^eLV_cj*100^a//昨天超户^n		Ret1:^eX11+ddx1^a//今天超户^n//^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s控盘度，超户同步调整^n		IF^pddx > 0^P//增加，控盘度调整，超户同步调整^n		{^n			IF^px1>95^P^n			{^n				ret :^e x1+ddx*0.1^a^n				Ret1 :^e x11+ddx1*0.1^a^n			}^n			ELSE IF^px1>90^P^n			{^n				ret :^e x1+ddx*0.5^a^n				Ret1 :^e x11+ddx1*0.5^a^n			}^n			ELSE IF^px1>85^P^n			{^n				ret :^e x1+ddx*0.8^a^n				Ret1 :^e x11+ddx1*0.8^a^n			}^n		}^n		IF^pddx < 0 ^P//减少，控盘度调整，超户同步^n		{^n			IF^px1<5^P^n			{^n				ret :^e x1+ddx*0.1^a^n				Ret1 :^e x11+ddx1*0.1^a^n			}^n			ELSE IF^px1<10^P^n			{^n				ret :^e x1+ddx*0.5^a^n				Ret1 :^e x11+ddx1*0.5^a^n			}^n			ELSE IF^px1<15^P^n			{^n				ret :^e x1+ddx*0.8^a^n				Ret1 :^e x11+ddx1*0.8^a^n			}^n		}^n	}^n//^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s控盘度超户绝对值调整^n	IF^pISNULL^pret^P^P^n		ret :^e LV_SUPER*100^a^n	IF^pISNULL^pret1^P^P^n		Ret1 :^e LV_Cj*100^a^n	IF^pret > 97.18^P^n		ret :^e 97.18^a^n	IF^pret < 2.08^P^n		ret :^e 2.08^a^n	IF^pret1 > 96^P^n		Ret1 :^e 96^a^n	IF^pret1 < 0^P^n		Ret1 :^e0^a^n}^nELSE^n{^n	ret^eLV_SUPER*100^a	^n	Ret1^eLV_Cj*100^a	^n}^n//^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s大户持仓比^nret2^eret^sret1^a^n//^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s中户持仓比^nA3^e100^sret^a//a为实时的散户持仓比例^n^nIF^pISNULL^pLV_ZH^bpos^B^P^P^n{^nDY^eLV_ZH^a//日中户持股占比^nBB1^e BIGBUYCOUNT3^a//主动中单买入股数^nSS1^eBIGSELLCOUNT3^a//主动中单卖出股数^nBB2^e WAITBUYCOUNT3^a//被动中单买入股数^nSS2^e WAITSELLCOUNT3^a//被动中单卖出股数^nZZ1^e^p BB1+ BB2^s SS1^s SS2^P^a//当天中户净买入股数^nZZ2^e^p BB1+ BB2^s SS1^s SS2^P/ TV_D_PUBLIC_SHARES *100^a//当天中户净买入占比^n	IF^pISNULL^pLV_ZH^P^P^n	{^n		RET3^e^pBB1+BB2^P/TV_D_PUBLIC_SHARES *100^a^n	}^n	ELSE^n	{^n		XX1^eDY *100^a^n		Ret3:^eXX1+^pZZ1/TV_D_PUBLIC_SHARES*100^P^a^n        IF^pZZ2>^e0^P^n        {^n			IF ^p XX1>0.9*a3^P//a是实时的原散户持仓比^n			RET3^eXX1+ZZ2*0.1^a^n			ELSE IF ^pXX1>0.85*a3^P^n			RET3^eXX1+ZZ2*0.5^a^n		^n		  }^n		IF^pZZ2< 0^P^n            {^n			IF ^pXX1<0.05*a3^P^n				RET3^eXX1+ZZ2*0.1^a^n			ELSE IF ^pXX1<0.1*a3^P^n				RET3^eXX1+ZZ2*0.5^a^n			}^n	}^n		^n	IF ^pret3 > 0.95*a3^P ret3^e0.95 *a3^a^n	IF ^pret3 < 0.02*a3^P ret3^e0.02 *a3^a^n	}^nELSE^n{^n	Ret3^e LV_ZH *100^a	^n}^n^n//^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s^s输出^n^nIF^p ISNULL^pLV_SUPER^P^e0^P^n   {^n	 控盘度:ret^a//控盘度数值^n		IF^pISNULL^pLV_SUPER^b1^B^P^e0^P^n	{^n		IF^pCOUNT^pret>0^c0^P<20^P^n		{^n		hz:ret>ret^b1^B^a^n		Lz:ret<ret^b1^B^a^n		Hzts:BARSLAST^pLz^P^a^n		Lzts:BARSLAST^pHz^P^a^n		Lsj:TV_D_PUBLIC_SHARES>1.05*TV_D_PUBLIC_SHARES^b1^B OR TV_D_PUBLIC_SHARES<0.95*TV_D_PUBLIC_SHARES^b1^B^a^n		sGt:ret>REF^pret^c1^PAND REF^pret^c1^P<REF^pret^c2^P^a^n		xgt:ret<REF^pret^c1^PAND REF^pret^c1^P>REF^pret^c2^P^a^n		}^n		ELSE^n		{^n		hz:ret>ret^b1^B^a^n		Lz:ret<ret^b1^B^a^n		Hzts:BARSLAST^pLz^P^a^n		Lzts:BARSLAST^pHz^P^a^n		Lsj:TV_D_PUBLIC_SHARES>1.05*TV_D_PUBLIC_SHARES^b1^B OR TV_D_PUBLIC_SHARES<0.95*TV_D_PUBLIC_SHARES^b1^B^a^n		ret20:MA^pret^c20^P^a^n		Hsc20:CROSS^pret^cret20^P^a^n		sGt:ret>REF^pret^c1^PAND REF^pret^c1^P<REF^pret^c2^P^a^n		xgt:ret<REF^pret^c1^PAND REF^pret^c1^P>REF^pret^c2^P^a^n    	}^n	}^n},2147430400