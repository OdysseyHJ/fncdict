pettm,3153,,if^pMARKETTYPE ^e^e 48^P^n{^n    ret ^e HQZSZ / SYS_IND_GMJLRTTM^a^n}^nelse if^pMARKETTYPE^e^e88 OR CODETYPE^e^e0^P^n{^n    if^pISNULL^pTTMJLR^P!^eTRUE AND TTMJLR < 0^P^n    {^n        ret ^e NULL^a^n    }^n    else if^p ^pTTMJLR!^e0 AND ISNULL^pTTMJLR^P!^eTRUE^P AND ISNULL^pHQZSZ^P!^eTRUE ^P^n    {^n    ret ^e HQZSZ/TTMJLR^a^n    }^n    else^n    {^n        ret ^e 0^a^n    }^n}^nelse^n{^n    x^eTTMJLR/ZGB^a^n    IF ^pISNULL^px^P!^eTRUE AND x < 0 ^P^n    {^n        ret ^e NULL^a^n    }^n    ELSE IF ^pISNULL^px^P ^e^e TRUE OR  x ^e^e 0 ^P^n    {^n        ret ^e 0^a^n    }^n    ELSE^n    {^n        IF ^pISNULL^pNEW^P AND ISNULL^pPRE^P !^e TRUE^P^n        {^n            ret ^e PRE/x^a^n        }^n        ELSE IF ^pISNULL^pNEW^P !^e TRUE^P^n        {^n            ret ^e NEW/x^a^n        }^n        ELSE  ^n        {^n            ret ^e 0^a^n        }^n    }^n}^nreturn ret^a,0